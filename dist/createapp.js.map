{"version":3,"sources":["../src/createapp.js"],"names":["storageDir","CreateApp","appName","port","createApp","storageConfig","diskStorage","destination","req","file","cb","filename","originalname","upload","storage","app","server","createServer","use","exposeHeaders","json","limit","urlencoded","extended","static","join","__dirname","set","listen","console","log","address"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMA,aAAa,IAAnB;;IAEMC,S;AAEJ,qBAAYC,OAAZ,EAAoBC,IAApB,EAAyB;AAAA;;AACvB,SAAKC,SAAL,CAAeF,OAAf,EAAuBC,IAAvB;AACD;;;;8BAESD,O,EAAQC,I,EAAK;AACrB;AACA,UAAIE,gBAAgB,iBAAOC,WAAP,CAAmB;AACrCC,qBAAa,qBAAUC,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACpCA,aAAG,IAAH,EAASV,UAAT;AACD,SAHoC;AAIrCW,kBAAU,kBAAUH,GAAV,EAAeC,IAAf,EAAqBC,EAArB,EAAyB;AACjC;AACAA,aAAG,IAAH,EAASD,KAAKG,YAAd;AACD;AAPoC,OAAnB,CAApB;;AAUA,UAAIC,SAAS,sBAAO,EAAEC,SAAST,aAAX,EAAP,CAAb;;AAEA;AACA,UAAMU,MAAM,wBAAZ;;AAEAA,UAAIC,MAAJ,GAAa,eAAKC,YAAL,CAAkBF,GAAlB,CAAb;AACAA,UAAIG,GAAJ,CAAQ,sBAAO,KAAP,CAAR;AACAH,UAAIG,GAAJ,CAAQ,oBAAK,EAACC,eAAe,GAAhB,EAAL,CAAR;AACAJ,UAAIG,GAAJ,CAAQ,qBAAWE,IAAX,CAAgB,EAACC,OAAO,MAAR,EAAhB,CAAR;AACAN,UAAIG,GAAJ,CAAQ,qBAAWI,UAAX,CAAsB,EAACC,UAAU,KAAX,EAAtB,CAAR;AACAR,UAAIG,GAAJ,CAAQ,kBAAQM,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAoB,KAAKxB,OAAL,GAAe,GAAnC,CAAf,CAAR;;AAEAa,UAAIY,GAAJ,CAAQ,MAAR,EAAeD,SAAf;AACAX,UAAIY,GAAJ,CAAQ,YAAR,EAAqB3B,UAArB;AACAe,UAAIY,GAAJ,CAAQ,QAAR,EAAiBd,MAAjB;;AAEA,2BAAcE,GAAd;;AAEAA,UAAIC,MAAJ,CAAWY,MAAX,CAAkBzB,IAAlB,EAAwB,YAAI;AAAC0B,gBAAQC,GAAR,CAAY,4BAA4Bf,IAAIC,MAAJ,CAAWe,OAAX,GAAqB5B,IAA7D;AAAoE,OAAjG;AACD;;;;;;kBAKYF,S","file":"createapp.js","sourcesContent":["import http from 'http';\r\nimport express from 'express';\r\nimport cors from 'cors';\r\nimport morgan from 'morgan';\r\nimport bodyParser from 'body-parser';\r\nimport AppRouter from './router';\r\nimport multer from 'multer';\r\nimport path from 'path';\r\n\r\nconst storageDir = 'W:';\r\n\r\nclass CreateApp {\r\n\r\n  constructor(appName,port){\r\n    this.createApp(appName,port);\r\n  }\r\n\r\n  createApp(appName,port){\r\n    //file storage config\r\n    var storageConfig = multer.diskStorage({\r\n      destination: function (req, file, cb) {\r\n        cb(null, storageDir);\r\n      },\r\n      filename: function (req, file, cb) {\r\n        //cb(null, `${Date.now().toString()}-${file.originalname}`);\r\n        cb(null, file.originalname);\r\n      }\r\n    });\r\n\r\n    var upload = multer({ storage: storageConfig })\r\n\r\n    //app config\r\n    const app = express();\r\n\r\n    app.server = http.createServer(app);\r\n    app.use(morgan('dev'));\r\n    app.use(cors({exposeHeaders: \"*\"}));\r\n    app.use(bodyParser.json({limit: '50mb'}));\r\n    app.use(bodyParser.urlencoded({extended: false}));\r\n    app.use(express.static(path.join(__dirname,'' + appName + '/')));\r\n\r\n    app.set('root',__dirname);\r\n    app.set('storageDir',storageDir);\r\n    app.set('upload',upload);\r\n\r\n    new AppRouter(app);\r\n\r\n    app.server.listen(port, ()=>{console.log('App is running on port ' + app.server.address().port);});\r\n  }\r\n\r\n\r\n}\r\n\r\nexport default CreateApp;\r\n"]}